{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.promisesForPopulate = exports.populateList = exports.getPopulateChild = exports.getPopulates = exports.getPopulateObjs = exports.getChildType = exports.getPopulateObj = undefined;\n\nvar _some2 = require('lodash/some');\n\nvar _some3 = _interopRequireDefault(_some2);\n\nvar _has2 = require('lodash/has');\n\nvar _has3 = _interopRequireDefault(_has2);\n\nvar _set2 = require('lodash/set');\n\nvar _set3 = _interopRequireDefault(_set2);\n\nvar _forEach2 = require('lodash/forEach');\n\nvar _forEach3 = _interopRequireDefault(_forEach2);\n\nvar _get2 = require('lodash/get');\n\nvar _get3 = _interopRequireDefault(_get2);\n\nvar _map2 = require('lodash/map');\n\nvar _map3 = _interopRequireDefault(_map2);\n\nvar _isObject2 = require('lodash/isObject');\n\nvar _isObject3 = _interopRequireDefault(_isObject2);\n\nvar _isFunction2 = require('lodash/isFunction');\n\nvar _isFunction3 = _interopRequireDefault(_isFunction2);\n\nvar _isArray2 = require('lodash/isArray');\n\nvar _isArray3 = _interopRequireDefault(_isArray2);\n\nvar _isString2 = require('lodash/isString');\n\nvar _isString3 = _interopRequireDefault(_isString2);\n\nvar _filter2 = require('lodash/filter');\n\nvar _filter3 = _interopRequireDefault(_filter2);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar getPopulateObj = exports.getPopulateObj = function getPopulateObj(str) {\n  if (!(0, _isString3.default)(str)) {\n    return str;\n  }\n\n  var strArray = str.split(':');\n  return {\n    child: strArray[0],\n    root: strArray[1]\n  };\n};\n\nvar getChildType = exports.getChildType = function getChildType(child) {\n  if ((0, _isString3.default)(child)) {\n    return 'string';\n  }\n\n  if ((0, _isArray3.default)(child)) {\n    return 'array';\n  }\n\n  if ((0, _isObject3.default)(child)) {\n    return 'object';\n  }\n\n  return 'other';\n};\n\nvar getPopulateObjs = exports.getPopulateObjs = function getPopulateObjs(arr) {\n  if (!(0, _isArray3.default)(arr)) {\n    return arr;\n  }\n\n  return arr.map(function (o) {\n    return (0, _isObject3.default)(o) ? o : getPopulateObj(o);\n  });\n};\n\nvar getPopulates = exports.getPopulates = function getPopulates(params) {\n  var populates = (0, _filter3.default)(params, function (param) {\n    return param.indexOf('populate') !== -1 || (0, _isObject3.default)(param) && param.populates;\n  }).map(function (p) {\n    return p.split('=')[1];\n  });\n\n  if (!populates.length) {\n    return null;\n  }\n\n  return populates.map(getPopulateObj);\n};\n\nvar getPopulateChild = exports.getPopulateChild = function getPopulateChild(firebase, populate, id) {\n  return firebase.database().ref().child(populate.root + '/' + id).once('value').then(function (snap) {\n    return snap.val();\n  });\n};\n\nvar populateList = exports.populateList = function populateList(firebase, list, p, results) {\n  if (!results[p.root]) {\n    (0, _set3.default)(results, p.root, {});\n  }\n\n  return Promise.all((0, _map3.default)(list, function (id, childKey) {\n    var populateKey = id === true || p.populateByKey ? childKey : id;\n    return getPopulateChild(firebase, p, populateKey).then(function (pc) {\n      if (pc) {\n        return (0, _set3.default)(results, p.root + '.' + populateKey, pc);\n      }\n\n      return results;\n    });\n  }));\n};\n\nvar promisesForPopulate = exports.promisesForPopulate = function promisesForPopulate(firebase, dataKey, originalData, populatesIn) {\n  var promisesArray = [];\n  var results = {};\n  var populatesForData = getPopulateObjs((0, _isFunction3.default)(populatesIn) ? populatesIn(dataKey, originalData) : populatesIn);\n  var dataHasPopulateChilds = (0, _some3.default)(populatesForData, function (populate) {\n    return (0, _has3.default)(originalData, populate.child);\n  });\n\n  if (dataHasPopulateChilds) {\n    (0, _forEach3.default)(populatesForData, function (p) {\n      if ((0, _isString3.default)((0, _get3.default)(originalData, p.child))) {\n        return promisesArray.push(getPopulateChild(firebase, p, (0, _get3.default)(originalData, p.child)).then(function (v) {\n          if (v) {\n            (0, _set3.default)(results, p.root + '.' + (0, _get3.default)(originalData, p.child), v);\n          }\n        }));\n      }\n\n      return promisesArray.push(populateList(firebase, (0, _get3.default)(originalData, p.child), p, results));\n    });\n  } else {\n    (0, _forEach3.default)(originalData, function (d, key) {\n      var populatesForDataItem = getPopulateObj((0, _isFunction3.default)(populatesIn) ? populatesIn(key, d) : populatesIn);\n      (0, _forEach3.default)(populatesForDataItem, function (p) {\n        var idOrList = (0, _get3.default)(d, p.child);\n\n        if (!idOrList) {\n          return;\n        }\n\n        if ((0, _isString3.default)(idOrList)) {\n          return promisesArray.push(getPopulateChild(firebase, p, idOrList).then(function (v) {\n            if (v) {\n              (0, _set3.default)(results, p.root + '.' + idOrList, v);\n            }\n\n            return results;\n          }));\n        }\n\n        if ((0, _isArray3.default)(idOrList) || (0, _isObject3.default)(idOrList)) {\n          return promisesArray.push(populateList(firebase, idOrList, p, results));\n        }\n      });\n    });\n  }\n\n  return Promise.all(promisesArray).then(function () {\n    return results;\n  });\n};\n\nexports.default = {\n  promisesForPopulate: promisesForPopulate\n};","map":{"version":3,"sources":["/Users/jatinkumar/Desktop/react-material-dashboard-master/node_modules/react-redux-firebase/es/utils/populate.js"],"names":["Object","defineProperty","exports","value","promisesForPopulate","populateList","getPopulateChild","getPopulates","getPopulateObjs","getChildType","getPopulateObj","undefined","_some2","require","_some3","_interopRequireDefault","_has2","_has3","_set2","_set3","_forEach2","_forEach3","_get2","_get3","_map2","_map3","_isObject2","_isObject3","_isFunction2","_isFunction3","_isArray2","_isArray3","_isString2","_isString3","_filter2","_filter3","obj","__esModule","default","str","strArray","split","child","root","arr","map","o","params","populates","param","indexOf","p","length","firebase","populate","id","database","ref","once","then","snap","val","list","results","Promise","all","childKey","populateKey","populateByKey","pc","dataKey","originalData","populatesIn","promisesArray","populatesForData","dataHasPopulateChilds","push","v","d","key","populatesForDataItem","idOrList"],"mappings":"AAAA;;AAEAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAC3CC,EAAAA,KAAK,EAAE;AADoC,CAA7C;AAGAD,OAAO,CAACE,mBAAR,GAA8BF,OAAO,CAACG,YAAR,GAAuBH,OAAO,CAACI,gBAAR,GAA2BJ,OAAO,CAACK,YAAR,GAAuBL,OAAO,CAACM,eAAR,GAA0BN,OAAO,CAACO,YAAR,GAAuBP,OAAO,CAACQ,cAAR,GAAyBC,SAAjL;;AAEA,IAAIC,MAAM,GAAGC,OAAO,CAAC,aAAD,CAApB;;AAEA,IAAIC,MAAM,GAAGC,sBAAsB,CAACH,MAAD,CAAnC;;AAEA,IAAII,KAAK,GAAGH,OAAO,CAAC,YAAD,CAAnB;;AAEA,IAAII,KAAK,GAAGF,sBAAsB,CAACC,KAAD,CAAlC;;AAEA,IAAIE,KAAK,GAAGL,OAAO,CAAC,YAAD,CAAnB;;AAEA,IAAIM,KAAK,GAAGJ,sBAAsB,CAACG,KAAD,CAAlC;;AAEA,IAAIE,SAAS,GAAGP,OAAO,CAAC,gBAAD,CAAvB;;AAEA,IAAIQ,SAAS,GAAGN,sBAAsB,CAACK,SAAD,CAAtC;;AAEA,IAAIE,KAAK,GAAGT,OAAO,CAAC,YAAD,CAAnB;;AAEA,IAAIU,KAAK,GAAGR,sBAAsB,CAACO,KAAD,CAAlC;;AAEA,IAAIE,KAAK,GAAGX,OAAO,CAAC,YAAD,CAAnB;;AAEA,IAAIY,KAAK,GAAGV,sBAAsB,CAACS,KAAD,CAAlC;;AAEA,IAAIE,UAAU,GAAGb,OAAO,CAAC,iBAAD,CAAxB;;AAEA,IAAIc,UAAU,GAAGZ,sBAAsB,CAACW,UAAD,CAAvC;;AAEA,IAAIE,YAAY,GAAGf,OAAO,CAAC,mBAAD,CAA1B;;AAEA,IAAIgB,YAAY,GAAGd,sBAAsB,CAACa,YAAD,CAAzC;;AAEA,IAAIE,SAAS,GAAGjB,OAAO,CAAC,gBAAD,CAAvB;;AAEA,IAAIkB,SAAS,GAAGhB,sBAAsB,CAACe,SAAD,CAAtC;;AAEA,IAAIE,UAAU,GAAGnB,OAAO,CAAC,iBAAD,CAAxB;;AAEA,IAAIoB,UAAU,GAAGlB,sBAAsB,CAACiB,UAAD,CAAvC;;AAEA,IAAIE,QAAQ,GAAGrB,OAAO,CAAC,eAAD,CAAtB;;AAEA,IAAIsB,QAAQ,GAAGpB,sBAAsB,CAACmB,QAAD,CAArC;;AAEA,SAASnB,sBAAT,CAAgCqB,GAAhC,EAAqC;AAAE,SAAOA,GAAG,IAAIA,GAAG,CAACC,UAAX,GAAwBD,GAAxB,GAA8B;AAAEE,IAAAA,OAAO,EAAEF;AAAX,GAArC;AAAwD;;AAE/F,IAAI1B,cAAc,GAAGR,OAAO,CAACQ,cAAR,GAAyB,SAASA,cAAT,CAAwB6B,GAAxB,EAA6B;AACzE,MAAI,CAAC,CAAC,GAAGN,UAAU,CAACK,OAAf,EAAwBC,GAAxB,CAAL,EAAmC;AACjC,WAAOA,GAAP;AACD;;AACD,MAAIC,QAAQ,GAAGD,GAAG,CAACE,KAAJ,CAAU,GAAV,CAAf;AAEA,SAAO;AAAEC,IAAAA,KAAK,EAAEF,QAAQ,CAAC,CAAD,CAAjB;AAAsBG,IAAAA,IAAI,EAAEH,QAAQ,CAAC,CAAD;AAApC,GAAP;AACD,CAPD;;AAQA,IAAI/B,YAAY,GAAGP,OAAO,CAACO,YAAR,GAAuB,SAASA,YAAT,CAAsBiC,KAAtB,EAA6B;AACrE,MAAI,CAAC,GAAGT,UAAU,CAACK,OAAf,EAAwBI,KAAxB,CAAJ,EAAoC;AAClC,WAAO,QAAP;AACD;;AACD,MAAI,CAAC,GAAGX,SAAS,CAACO,OAAd,EAAuBI,KAAvB,CAAJ,EAAmC;AACjC,WAAO,OAAP;AACD;;AACD,MAAI,CAAC,GAAGf,UAAU,CAACW,OAAf,EAAwBI,KAAxB,CAAJ,EAAoC;AAClC,WAAO,QAAP;AACD;;AACD,SAAO,OAAP;AACD,CAXD;;AAaA,IAAIlC,eAAe,GAAGN,OAAO,CAACM,eAAR,GAA0B,SAASA,eAAT,CAAyBoC,GAAzB,EAA8B;AAC5E,MAAI,CAAC,CAAC,GAAGb,SAAS,CAACO,OAAd,EAAuBM,GAAvB,CAAL,EAAkC;AAChC,WAAOA,GAAP;AACD;;AACD,SAAOA,GAAG,CAACC,GAAJ,CAAQ,UAAUC,CAAV,EAAa;AAC1B,WAAO,CAAC,GAAGnB,UAAU,CAACW,OAAf,EAAwBQ,CAAxB,IAA6BA,CAA7B,GAAiCpC,cAAc,CAACoC,CAAD,CAAtD;AACD,GAFM,CAAP;AAGD,CAPD;;AASA,IAAIvC,YAAY,GAAGL,OAAO,CAACK,YAAR,GAAuB,SAASA,YAAT,CAAsBwC,MAAtB,EAA8B;AACtE,MAAIC,SAAS,GAAG,CAAC,GAAGb,QAAQ,CAACG,OAAb,EAAsBS,MAAtB,EAA8B,UAAUE,KAAV,EAAiB;AAC7D,WAAOA,KAAK,CAACC,OAAN,CAAc,UAAd,MAA8B,CAAC,CAA/B,IAAoC,CAAC,GAAGvB,UAAU,CAACW,OAAf,EAAwBW,KAAxB,KAAkCA,KAAK,CAACD,SAAnF;AACD,GAFe,EAEbH,GAFa,CAET,UAAUM,CAAV,EAAa;AAClB,WAAOA,CAAC,CAACV,KAAF,CAAQ,GAAR,EAAa,CAAb,CAAP;AACD,GAJe,CAAhB;;AAMA,MAAI,CAACO,SAAS,CAACI,MAAf,EAAuB;AACrB,WAAO,IAAP;AACD;;AACD,SAAOJ,SAAS,CAACH,GAAV,CAAcnC,cAAd,CAAP;AACD,CAXD;;AAaA,IAAIJ,gBAAgB,GAAGJ,OAAO,CAACI,gBAAR,GAA2B,SAASA,gBAAT,CAA0B+C,QAA1B,EAAoCC,QAApC,EAA8CC,EAA9C,EAAkD;AAClG,SAAOF,QAAQ,CAACG,QAAT,GAAoBC,GAApB,GAA0Bf,KAA1B,CAAgCY,QAAQ,CAACX,IAAT,GAAgB,GAAhB,GAAsBY,EAAtD,EAA0DG,IAA1D,CAA+D,OAA/D,EAAwEC,IAAxE,CAA6E,UAAUC,IAAV,EAAgB;AAClG,WAAOA,IAAI,CAACC,GAAL,EAAP;AACD,GAFM,CAAP;AAGD,CAJD;;AAMA,IAAIxD,YAAY,GAAGH,OAAO,CAACG,YAAR,GAAuB,SAASA,YAAT,CAAsBgD,QAAtB,EAAgCS,IAAhC,EAAsCX,CAAtC,EAAyCY,OAAzC,EAAkD;AAC1F,MAAI,CAACA,OAAO,CAACZ,CAAC,CAACR,IAAH,CAAZ,EAAsB;AACpB,KAAC,GAAGxB,KAAK,CAACmB,OAAV,EAAmByB,OAAnB,EAA4BZ,CAAC,CAACR,IAA9B,EAAoC,EAApC;AACD;;AACD,SAAOqB,OAAO,CAACC,GAAR,CAAY,CAAC,GAAGxC,KAAK,CAACa,OAAV,EAAmBwB,IAAnB,EAAyB,UAAUP,EAAV,EAAcW,QAAd,EAAwB;AAClE,QAAIC,WAAW,GAAGZ,EAAE,KAAK,IAAP,IAAeJ,CAAC,CAACiB,aAAjB,GAAiCF,QAAjC,GAA4CX,EAA9D;AACA,WAAOjD,gBAAgB,CAAC+C,QAAD,EAAWF,CAAX,EAAcgB,WAAd,CAAhB,CAA2CR,IAA3C,CAAgD,UAAUU,EAAV,EAAc;AACnE,UAAIA,EAAJ,EAAQ;AACN,eAAO,CAAC,GAAGlD,KAAK,CAACmB,OAAV,EAAmByB,OAAnB,EAA4BZ,CAAC,CAACR,IAAF,GAAS,GAAT,GAAewB,WAA3C,EAAwDE,EAAxD,CAAP;AACD;;AACD,aAAON,OAAP;AACD,KALM,CAAP;AAMD,GARkB,CAAZ,CAAP;AASD,CAbD;;AAeA,IAAI3D,mBAAmB,GAAGF,OAAO,CAACE,mBAAR,GAA8B,SAASA,mBAAT,CAA6BiD,QAA7B,EAAuCiB,OAAvC,EAAgDC,YAAhD,EAA8DC,WAA9D,EAA2E;AACjI,MAAIC,aAAa,GAAG,EAApB;AACA,MAAIV,OAAO,GAAG,EAAd;AAEA,MAAIW,gBAAgB,GAAGlE,eAAe,CAAC,CAAC,GAAGqB,YAAY,CAACS,OAAjB,EAA0BkC,WAA1B,IAAyCA,WAAW,CAACF,OAAD,EAAUC,YAAV,CAApD,GAA8EC,WAA/E,CAAtC;AAEA,MAAIG,qBAAqB,GAAG,CAAC,GAAG7D,MAAM,CAACwB,OAAX,EAAoBoC,gBAApB,EAAsC,UAAUpB,QAAV,EAAoB;AACpF,WAAO,CAAC,GAAGrC,KAAK,CAACqB,OAAV,EAAmBiC,YAAnB,EAAiCjB,QAAQ,CAACZ,KAA1C,CAAP;AACD,GAF2B,CAA5B;;AAIA,MAAIiC,qBAAJ,EAA2B;AACzB,KAAC,GAAGtD,SAAS,CAACiB,OAAd,EAAuBoC,gBAAvB,EAAyC,UAAUvB,CAAV,EAAa;AACpD,UAAI,CAAC,GAAGlB,UAAU,CAACK,OAAf,EAAwB,CAAC,GAAGf,KAAK,CAACe,OAAV,EAAmBiC,YAAnB,EAAiCpB,CAAC,CAACT,KAAnC,CAAxB,CAAJ,EAAwE;AACtE,eAAO+B,aAAa,CAACG,IAAd,CAAmBtE,gBAAgB,CAAC+C,QAAD,EAAWF,CAAX,EAAc,CAAC,GAAG5B,KAAK,CAACe,OAAV,EAAmBiC,YAAnB,EAAiCpB,CAAC,CAACT,KAAnC,CAAd,CAAhB,CAAyEiB,IAAzE,CAA8E,UAAUkB,CAAV,EAAa;AACnH,cAAIA,CAAJ,EAAO;AACL,aAAC,GAAG1D,KAAK,CAACmB,OAAV,EAAmByB,OAAnB,EAA4BZ,CAAC,CAACR,IAAF,GAAS,GAAT,GAAe,CAAC,GAAGpB,KAAK,CAACe,OAAV,EAAmBiC,YAAnB,EAAiCpB,CAAC,CAACT,KAAnC,CAA3C,EAAsFmC,CAAtF;AACD;AACF,SAJyB,CAAnB,CAAP;AAKD;;AAED,aAAOJ,aAAa,CAACG,IAAd,CAAmBvE,YAAY,CAACgD,QAAD,EAAW,CAAC,GAAG9B,KAAK,CAACe,OAAV,EAAmBiC,YAAnB,EAAiCpB,CAAC,CAACT,KAAnC,CAAX,EAAsDS,CAAtD,EAAyDY,OAAzD,CAA/B,CAAP;AACD,KAVD;AAWD,GAZD,MAYO;AACL,KAAC,GAAG1C,SAAS,CAACiB,OAAd,EAAuBiC,YAAvB,EAAqC,UAAUO,CAAV,EAAaC,GAAb,EAAkB;AACrD,UAAIC,oBAAoB,GAAGtE,cAAc,CAAC,CAAC,GAAGmB,YAAY,CAACS,OAAjB,EAA0BkC,WAA1B,IAAyCA,WAAW,CAACO,GAAD,EAAMD,CAAN,CAApD,GAA+DN,WAAhE,CAAzC;AAEA,OAAC,GAAGnD,SAAS,CAACiB,OAAd,EAAuB0C,oBAAvB,EAA6C,UAAU7B,CAAV,EAAa;AACxD,YAAI8B,QAAQ,GAAG,CAAC,GAAG1D,KAAK,CAACe,OAAV,EAAmBwC,CAAnB,EAAsB3B,CAAC,CAACT,KAAxB,CAAf;;AAEA,YAAI,CAACuC,QAAL,EAAe;AACb;AACD;;AAED,YAAI,CAAC,GAAGhD,UAAU,CAACK,OAAf,EAAwB2C,QAAxB,CAAJ,EAAuC;AACrC,iBAAOR,aAAa,CAACG,IAAd,CAAmBtE,gBAAgB,CAAC+C,QAAD,EAAWF,CAAX,EAAc8B,QAAd,CAAhB,CAAwCtB,IAAxC,CAA6C,UAAUkB,CAAV,EAAa;AAClF,gBAAIA,CAAJ,EAAO;AACL,eAAC,GAAG1D,KAAK,CAACmB,OAAV,EAAmByB,OAAnB,EAA4BZ,CAAC,CAACR,IAAF,GAAS,GAAT,GAAesC,QAA3C,EAAqDJ,CAArD;AACD;;AACD,mBAAOd,OAAP;AACD,WALyB,CAAnB,CAAP;AAMD;;AAED,YAAI,CAAC,GAAGhC,SAAS,CAACO,OAAd,EAAuB2C,QAAvB,KAAoC,CAAC,GAAGtD,UAAU,CAACW,OAAf,EAAwB2C,QAAxB,CAAxC,EAA2E;AACzE,iBAAOR,aAAa,CAACG,IAAd,CAAmBvE,YAAY,CAACgD,QAAD,EAAW4B,QAAX,EAAqB9B,CAArB,EAAwBY,OAAxB,CAA/B,CAAP;AACD;AACF,OAnBD;AAoBD,KAvBD;AAwBD;;AAED,SAAOC,OAAO,CAACC,GAAR,CAAYQ,aAAZ,EAA2Bd,IAA3B,CAAgC,YAAY;AACjD,WAAOI,OAAP;AACD,GAFM,CAAP;AAGD,CApDD;;AAsDA7D,OAAO,CAACoC,OAAR,GAAkB;AAAElC,EAAAA,mBAAmB,EAAEA;AAAvB,CAAlB","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.promisesForPopulate = exports.populateList = exports.getPopulateChild = exports.getPopulates = exports.getPopulateObjs = exports.getChildType = exports.getPopulateObj = undefined;\n\nvar _some2 = require('lodash/some');\n\nvar _some3 = _interopRequireDefault(_some2);\n\nvar _has2 = require('lodash/has');\n\nvar _has3 = _interopRequireDefault(_has2);\n\nvar _set2 = require('lodash/set');\n\nvar _set3 = _interopRequireDefault(_set2);\n\nvar _forEach2 = require('lodash/forEach');\n\nvar _forEach3 = _interopRequireDefault(_forEach2);\n\nvar _get2 = require('lodash/get');\n\nvar _get3 = _interopRequireDefault(_get2);\n\nvar _map2 = require('lodash/map');\n\nvar _map3 = _interopRequireDefault(_map2);\n\nvar _isObject2 = require('lodash/isObject');\n\nvar _isObject3 = _interopRequireDefault(_isObject2);\n\nvar _isFunction2 = require('lodash/isFunction');\n\nvar _isFunction3 = _interopRequireDefault(_isFunction2);\n\nvar _isArray2 = require('lodash/isArray');\n\nvar _isArray3 = _interopRequireDefault(_isArray2);\n\nvar _isString2 = require('lodash/isString');\n\nvar _isString3 = _interopRequireDefault(_isString2);\n\nvar _filter2 = require('lodash/filter');\n\nvar _filter3 = _interopRequireDefault(_filter2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar getPopulateObj = exports.getPopulateObj = function getPopulateObj(str) {\n  if (!(0, _isString3.default)(str)) {\n    return str;\n  }\n  var strArray = str.split(':');\n\n  return { child: strArray[0], root: strArray[1] };\n};\nvar getChildType = exports.getChildType = function getChildType(child) {\n  if ((0, _isString3.default)(child)) {\n    return 'string';\n  }\n  if ((0, _isArray3.default)(child)) {\n    return 'array';\n  }\n  if ((0, _isObject3.default)(child)) {\n    return 'object';\n  }\n  return 'other';\n};\n\nvar getPopulateObjs = exports.getPopulateObjs = function getPopulateObjs(arr) {\n  if (!(0, _isArray3.default)(arr)) {\n    return arr;\n  }\n  return arr.map(function (o) {\n    return (0, _isObject3.default)(o) ? o : getPopulateObj(o);\n  });\n};\n\nvar getPopulates = exports.getPopulates = function getPopulates(params) {\n  var populates = (0, _filter3.default)(params, function (param) {\n    return param.indexOf('populate') !== -1 || (0, _isObject3.default)(param) && param.populates;\n  }).map(function (p) {\n    return p.split('=')[1];\n  });\n\n  if (!populates.length) {\n    return null;\n  }\n  return populates.map(getPopulateObj);\n};\n\nvar getPopulateChild = exports.getPopulateChild = function getPopulateChild(firebase, populate, id) {\n  return firebase.database().ref().child(populate.root + '/' + id).once('value').then(function (snap) {\n    return snap.val();\n  });\n};\n\nvar populateList = exports.populateList = function populateList(firebase, list, p, results) {\n  if (!results[p.root]) {\n    (0, _set3.default)(results, p.root, {});\n  }\n  return Promise.all((0, _map3.default)(list, function (id, childKey) {\n    var populateKey = id === true || p.populateByKey ? childKey : id;\n    return getPopulateChild(firebase, p, populateKey).then(function (pc) {\n      if (pc) {\n        return (0, _set3.default)(results, p.root + '.' + populateKey, pc);\n      }\n      return results;\n    });\n  }));\n};\n\nvar promisesForPopulate = exports.promisesForPopulate = function promisesForPopulate(firebase, dataKey, originalData, populatesIn) {\n  var promisesArray = [];\n  var results = {};\n\n  var populatesForData = getPopulateObjs((0, _isFunction3.default)(populatesIn) ? populatesIn(dataKey, originalData) : populatesIn);\n\n  var dataHasPopulateChilds = (0, _some3.default)(populatesForData, function (populate) {\n    return (0, _has3.default)(originalData, populate.child);\n  });\n\n  if (dataHasPopulateChilds) {\n    (0, _forEach3.default)(populatesForData, function (p) {\n      if ((0, _isString3.default)((0, _get3.default)(originalData, p.child))) {\n        return promisesArray.push(getPopulateChild(firebase, p, (0, _get3.default)(originalData, p.child)).then(function (v) {\n          if (v) {\n            (0, _set3.default)(results, p.root + '.' + (0, _get3.default)(originalData, p.child), v);\n          }\n        }));\n      }\n\n      return promisesArray.push(populateList(firebase, (0, _get3.default)(originalData, p.child), p, results));\n    });\n  } else {\n    (0, _forEach3.default)(originalData, function (d, key) {\n      var populatesForDataItem = getPopulateObj((0, _isFunction3.default)(populatesIn) ? populatesIn(key, d) : populatesIn);\n\n      (0, _forEach3.default)(populatesForDataItem, function (p) {\n        var idOrList = (0, _get3.default)(d, p.child);\n\n        if (!idOrList) {\n          return;\n        }\n\n        if ((0, _isString3.default)(idOrList)) {\n          return promisesArray.push(getPopulateChild(firebase, p, idOrList).then(function (v) {\n            if (v) {\n              (0, _set3.default)(results, p.root + '.' + idOrList, v);\n            }\n            return results;\n          }));\n        }\n\n        if ((0, _isArray3.default)(idOrList) || (0, _isObject3.default)(idOrList)) {\n          return promisesArray.push(populateList(firebase, idOrList, p, results));\n        }\n      });\n    });\n  }\n\n  return Promise.all(promisesArray).then(function () {\n    return results;\n  });\n};\n\nexports.default = { promisesForPopulate: promisesForPopulate };"]},"metadata":{},"sourceType":"script"}