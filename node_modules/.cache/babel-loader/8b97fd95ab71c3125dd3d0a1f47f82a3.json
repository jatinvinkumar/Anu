{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getEventsFromInput = exports.pathStrToObj = undefined;\n\nvar _remove2 = require('lodash/remove');\n\nvar _remove3 = _interopRequireDefault(_remove2);\n\nvar _isString2 = require('lodash/isString');\n\nvar _isString3 = _interopRequireDefault(_isString2);\n\nvar _isObject2 = require('lodash/isObject');\n\nvar _isObject3 = _interopRequireDefault(_isObject2);\n\nvar _isArray2 = require('lodash/isArray');\n\nvar _isArray3 = _interopRequireDefault(_isArray2);\n\nvar _flatMap2 = require('lodash/flatMap');\n\nvar _flatMap3 = _interopRequireDefault(_flatMap2);\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _populate = require('./populate');\n\nvar _query = require('./query');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar pathStrToObj = exports.pathStrToObj = function pathStrToObj(path) {\n  var pathObj = {\n    path: path,\n    type: 'value',\n    isQuery: false\n  };\n  var queryId = (0, _query.getQueryIdFromPath)(path);\n\n  if (queryId) {\n    var pathArray = path.split('#');\n    pathObj = _extends({}, pathObj, {\n      queryId: queryId,\n      isQuery: true,\n      path: pathArray[0],\n      queryParams: pathArray[1].split('&')\n    });\n\n    if ((0, _populate.getPopulates)(pathArray[1].split('&'))) {\n      pathObj.populates = (0, _populate.getPopulates)(pathArray[1].split('&'));\n      pathObj.queryParams = (0, _remove3.default)(pathArray[1].split('&'), function (p) {\n        return p.indexOf('populate') === -1;\n      });\n    }\n  }\n\n  return pathObj;\n};\n\nvar getEventsFromInput = exports.getEventsFromInput = function getEventsFromInput(paths) {\n  return (0, _flatMap3.default)(paths, function (path) {\n    if ((0, _isString3.default)(path)) {\n      return [pathStrToObj(path)];\n    }\n\n    if ((0, _isArray3.default)(path)) {\n      return [{\n        type: 'first_child',\n        path: path[0]\n      }, {\n        type: 'child_added',\n        path: path[0]\n      }, {\n        type: 'child_removed',\n        path: path[0]\n      }, {\n        type: 'child_moved',\n        path: path[0]\n      }, {\n        type: 'child_changed',\n        path: path[0]\n      }];\n    }\n\n    if ((0, _isObject3.default)(path)) {\n      if (!path.path) {\n        throw new Error('Path is a required parameter within definition object');\n      }\n\n      var strPath = path.path;\n\n      if (path.storeAs) {\n        strPath += '@' + path.storeAs;\n      }\n\n      if (path.queryParams) {\n        strPath += '#' + path.queryParams.join('&');\n      }\n\n      path = _extends({}, pathStrToObj(strPath), path);\n      return [path];\n    }\n\n    throw new Error('Invalid Path Definition: ' + path + '. Only strings, objects, and arrays accepted.');\n  });\n};\n\nexports.default = {\n  getEventsFromInput: getEventsFromInput\n};","map":{"version":3,"sources":["/Users/jatinkumar/Desktop/Anupuam/node_modules/react-redux-firebase/es/utils/events.js"],"names":["Object","defineProperty","exports","value","getEventsFromInput","pathStrToObj","undefined","_remove2","require","_remove3","_interopRequireDefault","_isString2","_isString3","_isObject2","_isObject3","_isArray2","_isArray3","_flatMap2","_flatMap3","_extends","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_populate","_query","obj","__esModule","default","path","pathObj","type","isQuery","queryId","getQueryIdFromPath","pathArray","split","queryParams","getPopulates","populates","p","indexOf","paths","Error","strPath","storeAs","join"],"mappings":"AAAA;;AAEAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAC3CC,EAAAA,KAAK,EAAE;AADoC,CAA7C;AAGAD,OAAO,CAACE,kBAAR,GAA6BF,OAAO,CAACG,YAAR,GAAuBC,SAApD;;AAEA,IAAIC,QAAQ,GAAGC,OAAO,CAAC,eAAD,CAAtB;;AAEA,IAAIC,QAAQ,GAAGC,sBAAsB,CAACH,QAAD,CAArC;;AAEA,IAAII,UAAU,GAAGH,OAAO,CAAC,iBAAD,CAAxB;;AAEA,IAAII,UAAU,GAAGF,sBAAsB,CAACC,UAAD,CAAvC;;AAEA,IAAIE,UAAU,GAAGL,OAAO,CAAC,iBAAD,CAAxB;;AAEA,IAAIM,UAAU,GAAGJ,sBAAsB,CAACG,UAAD,CAAvC;;AAEA,IAAIE,SAAS,GAAGP,OAAO,CAAC,gBAAD,CAAvB;;AAEA,IAAIQ,SAAS,GAAGN,sBAAsB,CAACK,SAAD,CAAtC;;AAEA,IAAIE,SAAS,GAAGT,OAAO,CAAC,gBAAD,CAAvB;;AAEA,IAAIU,SAAS,GAAGR,sBAAsB,CAACO,SAAD,CAAtC;;AAEA,IAAIE,QAAQ,GAAGnB,MAAM,CAACoB,MAAP,IAAiB,UAAUC,MAAV,EAAkB;AAAE,OAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGC,SAAS,CAACC,MAA9B,EAAsCF,CAAC,EAAvC,EAA2C;AAAE,QAAIG,MAAM,GAAGF,SAAS,CAACD,CAAD,CAAtB;;AAA2B,SAAK,IAAII,GAAT,IAAgBD,MAAhB,EAAwB;AAAE,UAAIzB,MAAM,CAAC2B,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCJ,MAArC,EAA6CC,GAA7C,CAAJ,EAAuD;AAAEL,QAAAA,MAAM,CAACK,GAAD,CAAN,GAAcD,MAAM,CAACC,GAAD,CAApB;AAA4B;AAAE;AAAE;;AAAC,SAAOL,MAAP;AAAgB,CAAhQ;;AAEA,IAAIS,SAAS,GAAGtB,OAAO,CAAC,YAAD,CAAvB;;AAEA,IAAIuB,MAAM,GAAGvB,OAAO,CAAC,SAAD,CAApB;;AAEA,SAASE,sBAAT,CAAgCsB,GAAhC,EAAqC;AAAE,SAAOA,GAAG,IAAIA,GAAG,CAACC,UAAX,GAAwBD,GAAxB,GAA8B;AAAEE,IAAAA,OAAO,EAAEF;AAAX,GAArC;AAAwD;;AAE/F,IAAI3B,YAAY,GAAGH,OAAO,CAACG,YAAR,GAAuB,SAASA,YAAT,CAAsB8B,IAAtB,EAA4B;AACpE,MAAIC,OAAO,GAAG;AAAED,IAAAA,IAAI,EAAEA,IAAR;AAAcE,IAAAA,IAAI,EAAE,OAApB;AAA6BC,IAAAA,OAAO,EAAE;AAAtC,GAAd;AACA,MAAIC,OAAO,GAAG,CAAC,GAAGR,MAAM,CAACS,kBAAX,EAA+BL,IAA/B,CAAd;;AAEA,MAAII,OAAJ,EAAa;AACX,QAAIE,SAAS,GAAGN,IAAI,CAACO,KAAL,CAAW,GAAX,CAAhB;AACAN,IAAAA,OAAO,GAAGjB,QAAQ,CAAC,EAAD,EAAKiB,OAAL,EAAc;AAC9BG,MAAAA,OAAO,EAAEA,OADqB;AAE9BD,MAAAA,OAAO,EAAE,IAFqB;AAG9BH,MAAAA,IAAI,EAAEM,SAAS,CAAC,CAAD,CAHe;AAI9BE,MAAAA,WAAW,EAAEF,SAAS,CAAC,CAAD,CAAT,CAAaC,KAAb,CAAmB,GAAnB;AAJiB,KAAd,CAAlB;;AAMA,QAAI,CAAC,GAAGZ,SAAS,CAACc,YAAd,EAA4BH,SAAS,CAAC,CAAD,CAAT,CAAaC,KAAb,CAAmB,GAAnB,CAA5B,CAAJ,EAA0D;AACxDN,MAAAA,OAAO,CAACS,SAAR,GAAoB,CAAC,GAAGf,SAAS,CAACc,YAAd,EAA4BH,SAAS,CAAC,CAAD,CAAT,CAAaC,KAAb,CAAmB,GAAnB,CAA5B,CAApB;AACAN,MAAAA,OAAO,CAACO,WAAR,GAAsB,CAAC,GAAGlC,QAAQ,CAACyB,OAAb,EAAsBO,SAAS,CAAC,CAAD,CAAT,CAAaC,KAAb,CAAmB,GAAnB,CAAtB,EAA+C,UAAUI,CAAV,EAAa;AAChF,eAAOA,CAAC,CAACC,OAAF,CAAU,UAAV,MAA0B,CAAC,CAAlC;AACD,OAFqB,CAAtB;AAGD;AACF;;AAED,SAAOX,OAAP;AACD,CArBD;;AAuBA,IAAIhC,kBAAkB,GAAGF,OAAO,CAACE,kBAAR,GAA6B,SAASA,kBAAT,CAA4B4C,KAA5B,EAAmC;AACvF,SAAO,CAAC,GAAG9B,SAAS,CAACgB,OAAd,EAAuBc,KAAvB,EAA8B,UAAUb,IAAV,EAAgB;AACnD,QAAI,CAAC,GAAGvB,UAAU,CAACsB,OAAf,EAAwBC,IAAxB,CAAJ,EAAmC;AACjC,aAAO,CAAC9B,YAAY,CAAC8B,IAAD,CAAb,CAAP;AACD;;AAED,QAAI,CAAC,GAAGnB,SAAS,CAACkB,OAAd,EAAuBC,IAAvB,CAAJ,EAAkC;AAChC,aAAO,CAAC;AAAEE,QAAAA,IAAI,EAAE,aAAR;AAAuBF,QAAAA,IAAI,EAAEA,IAAI,CAAC,CAAD;AAAjC,OAAD,EAAyC;AAAEE,QAAAA,IAAI,EAAE,aAAR;AAAuBF,QAAAA,IAAI,EAAEA,IAAI,CAAC,CAAD;AAAjC,OAAzC,EAAiF;AAAEE,QAAAA,IAAI,EAAE,eAAR;AAAyBF,QAAAA,IAAI,EAAEA,IAAI,CAAC,CAAD;AAAnC,OAAjF,EAA2H;AAAEE,QAAAA,IAAI,EAAE,aAAR;AAAuBF,QAAAA,IAAI,EAAEA,IAAI,CAAC,CAAD;AAAjC,OAA3H,EAAmK;AAAEE,QAAAA,IAAI,EAAE,eAAR;AAAyBF,QAAAA,IAAI,EAAEA,IAAI,CAAC,CAAD;AAAnC,OAAnK,CAAP;AACD;;AAED,QAAI,CAAC,GAAGrB,UAAU,CAACoB,OAAf,EAAwBC,IAAxB,CAAJ,EAAmC;AACjC,UAAI,CAACA,IAAI,CAACA,IAAV,EAAgB;AACd,cAAM,IAAIc,KAAJ,CAAU,uDAAV,CAAN;AACD;;AACD,UAAIC,OAAO,GAAGf,IAAI,CAACA,IAAnB;;AAEA,UAAIA,IAAI,CAACgB,OAAT,EAAkB;AAChBD,QAAAA,OAAO,IAAI,MAAMf,IAAI,CAACgB,OAAtB;AACD;;AAED,UAAIhB,IAAI,CAACQ,WAAT,EAAsB;AACpBO,QAAAA,OAAO,IAAI,MAAMf,IAAI,CAACQ,WAAL,CAAiBS,IAAjB,CAAsB,GAAtB,CAAjB;AACD;;AAEDjB,MAAAA,IAAI,GAAGhB,QAAQ,CAAC,EAAD,EAAKd,YAAY,CAAC6C,OAAD,CAAjB,EAA4Bf,IAA5B,CAAf;AACA,aAAO,CAACA,IAAD,CAAP;AACD;;AAED,UAAM,IAAIc,KAAJ,CAAU,8BAA8Bd,IAA9B,GAAqC,+CAA/C,CAAN;AACD,GA5BM,CAAP;AA6BD,CA9BD;;AAgCAjC,OAAO,CAACgC,OAAR,GAAkB;AAAE9B,EAAAA,kBAAkB,EAAEA;AAAtB,CAAlB","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getEventsFromInput = exports.pathStrToObj = undefined;\n\nvar _remove2 = require('lodash/remove');\n\nvar _remove3 = _interopRequireDefault(_remove2);\n\nvar _isString2 = require('lodash/isString');\n\nvar _isString3 = _interopRequireDefault(_isString2);\n\nvar _isObject2 = require('lodash/isObject');\n\nvar _isObject3 = _interopRequireDefault(_isObject2);\n\nvar _isArray2 = require('lodash/isArray');\n\nvar _isArray3 = _interopRequireDefault(_isArray2);\n\nvar _flatMap2 = require('lodash/flatMap');\n\nvar _flatMap3 = _interopRequireDefault(_flatMap2);\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _populate = require('./populate');\n\nvar _query = require('./query');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar pathStrToObj = exports.pathStrToObj = function pathStrToObj(path) {\n  var pathObj = { path: path, type: 'value', isQuery: false };\n  var queryId = (0, _query.getQueryIdFromPath)(path);\n\n  if (queryId) {\n    var pathArray = path.split('#');\n    pathObj = _extends({}, pathObj, {\n      queryId: queryId,\n      isQuery: true,\n      path: pathArray[0],\n      queryParams: pathArray[1].split('&')\n    });\n    if ((0, _populate.getPopulates)(pathArray[1].split('&'))) {\n      pathObj.populates = (0, _populate.getPopulates)(pathArray[1].split('&'));\n      pathObj.queryParams = (0, _remove3.default)(pathArray[1].split('&'), function (p) {\n        return p.indexOf('populate') === -1;\n      });\n    }\n  }\n\n  return pathObj;\n};\n\nvar getEventsFromInput = exports.getEventsFromInput = function getEventsFromInput(paths) {\n  return (0, _flatMap3.default)(paths, function (path) {\n    if ((0, _isString3.default)(path)) {\n      return [pathStrToObj(path)];\n    }\n\n    if ((0, _isArray3.default)(path)) {\n      return [{ type: 'first_child', path: path[0] }, { type: 'child_added', path: path[0] }, { type: 'child_removed', path: path[0] }, { type: 'child_moved', path: path[0] }, { type: 'child_changed', path: path[0] }];\n    }\n\n    if ((0, _isObject3.default)(path)) {\n      if (!path.path) {\n        throw new Error('Path is a required parameter within definition object');\n      }\n      var strPath = path.path;\n\n      if (path.storeAs) {\n        strPath += '@' + path.storeAs;\n      }\n\n      if (path.queryParams) {\n        strPath += '#' + path.queryParams.join('&');\n      }\n\n      path = _extends({}, pathStrToObj(strPath), path);\n      return [path];\n    }\n\n    throw new Error('Invalid Path Definition: ' + path + '. Only strings, objects, and arrays accepted.');\n  });\n};\n\nexports.default = { getEventsFromInput: getEventsFromInput };"]},"metadata":{},"sourceType":"script"}