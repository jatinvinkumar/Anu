{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.remove = exports.unWatchEvents = exports.watchEvents = exports.unWatchEvent = exports.watchEvent = undefined;\n\nvar _isArray2 = require('lodash/isArray');\n\nvar _isArray3 = _interopRequireDefault(_isArray2);\n\nvar _constants = require('../constants');\n\nvar _query = require('../utils/query');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar watchEvent = exports.watchEvent = function watchEvent(firebase, dispatch, options) {\n  if (!firebase.database || typeof firebase.database !== 'function') {\n    throw new Error('Firebase database is required to create watchers');\n  }\n\n  var type = options.type,\n      path = options.path,\n      populates = options.populates,\n      queryParams = options.queryParams,\n      queryId = options.queryId,\n      isQuery = options.isQuery,\n      storeAs = options.storeAs;\n  var logErrors = firebase._.config.logErrors;\n  var watchPath = !storeAs ? path : path + '@' + storeAs;\n  var id = queryId || (0, _query.getQueryIdFromPath)(path);\n  var counter = (0, _query.getWatcherCount)(firebase, type, watchPath, id);\n\n  if (counter > 0) {\n    if (id) {\n      (0, _query.unsetWatcher)(firebase, dispatch, type, path, id);\n    }\n  }\n\n  (0, _query.setWatcher)(firebase, dispatch, type, watchPath, id);\n\n  if (type === 'first_child') {\n    return firebase.database().ref().child(path).orderByKey().limitToFirst(1).once('value').then(function (snapshot) {\n      if (snapshot.val() === null) {\n        dispatch({\n          type: _constants.actionTypes.NO_VALUE,\n          path: storeAs || path\n        });\n      }\n\n      return snapshot;\n    }).catch(function (err) {\n      dispatch({\n        type: _constants.actionTypes.ERROR,\n        path: storeAs || path,\n        payload: err\n      });\n      return Promise.reject(err);\n    });\n  }\n\n  var query = firebase.database().ref().child(path);\n\n  if (isQuery) {\n    query = (0, _query.applyParamsToQuery)(queryParams, query);\n  }\n\n  dispatch({\n    type: _constants.actionTypes.START,\n    path: storeAs || path\n  });\n\n  if (type === 'once') {\n    return query.once('value').then(function (snapshot) {\n      if (snapshot.val() === null) {\n        return dispatch({\n          type: _constants.actionTypes.NO_VALUE,\n          path: storeAs || path\n        });\n      }\n\n      if (!populates) {\n        return dispatch({\n          type: _constants.actionTypes.SET,\n          path: storeAs || path,\n          data: snapshot.val(),\n          ordered: (0, _query.orderedFromSnapshot)(snapshot)\n        });\n      }\n\n      return (0, _query.populateAndDispatch)(firebase, dispatch, {\n        path: path,\n        storeAs: storeAs,\n        snapshot: snapshot,\n        data: snapshot.val(),\n        populates: populates\n      });\n    }).catch(function (err) {\n      dispatch({\n        type: _constants.actionTypes.UNAUTHORIZED_ERROR,\n        payload: err\n      });\n      return Promise.reject(err);\n    });\n  }\n\n  query.on(type, function (snapshot) {\n    var data = type === 'child_removed' ? undefined : snapshot.val();\n    var resultPath = storeAs || type === 'value' ? path : path + '/' + snapshot.key;\n\n    if (!populates) {\n      var ordered = type === 'child_added' ? [{\n        key: snapshot.key,\n        value: snapshot.val()\n      }] : (0, _query.orderedFromSnapshot)(snapshot);\n      return dispatch({\n        type: _constants.actionTypes.SET,\n        path: storeAs || resultPath,\n        data: data,\n        ordered: ordered\n      });\n    }\n\n    return (0, _query.populateAndDispatch)(firebase, dispatch, {\n      path: path,\n      storeAs: storeAs,\n      snapshot: snapshot,\n      data: snapshot.val(),\n      populates: populates\n    });\n  }, function (err) {\n    if (logErrors) {\n      console.log('RRF: Error retrieving data for path: ' + path + ', storeAs: ' + storeAs + '. Firebase:', err);\n    }\n\n    dispatch({\n      type: _constants.actionTypes.ERROR,\n      storeAs: storeAs,\n      path: path,\n      payload: err\n    });\n  });\n};\n\nvar unWatchEvent = exports.unWatchEvent = function unWatchEvent(firebase, dispatch, _ref) {\n  var type = _ref.type,\n      path = _ref.path,\n      storeAs = _ref.storeAs,\n      queryId = _ref.queryId;\n  var watchPath = !storeAs ? path : path + '@' + storeAs;\n  (0, _query.unsetWatcher)(firebase, dispatch, type, watchPath, queryId);\n};\n\nvar watchEvents = exports.watchEvents = function watchEvents(firebase, dispatch, events) {\n  if (!(0, _isArray3.default)(events)) {\n    throw new Error('Events config must be an Array');\n  }\n\n  return events.map(function (event) {\n    return watchEvent(firebase, dispatch, event);\n  });\n};\n\nvar unWatchEvents = exports.unWatchEvents = function unWatchEvents(firebase, dispatch, events) {\n  return events.forEach(function (event) {\n    return unWatchEvent(firebase, dispatch, event);\n  });\n};\n\nvar remove = exports.remove = function remove(firebase, dispatch, path) {\n  var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n  var _options$dispatchActi = options.dispatchAction,\n      dispatchAction = _options$dispatchActi === undefined ? true : _options$dispatchActi;\n  var dispatchRemoveAction = firebase._.config.dispatchRemoveAction;\n  return firebase.database().ref(path).remove().then(function () {\n    if (dispatchRemoveAction && dispatchAction) {\n      dispatch({\n        type: _constants.actionTypes.REMOVE,\n        path: path\n      });\n    }\n\n    return path;\n  }).catch(function (err) {\n    dispatch({\n      type: _constants.actionTypes.ERROR,\n      payload: err\n    });\n    return Promise.reject(err);\n  });\n};\n\nexports.default = {\n  watchEvents: watchEvents,\n  unWatchEvents: unWatchEvents,\n  remove: remove\n};","map":{"version":3,"sources":["/Users/jatinkumar/Desktop/react-material-dashboard-master/node_modules/react-redux-firebase/es/actions/query.js"],"names":["Object","defineProperty","exports","value","remove","unWatchEvents","watchEvents","unWatchEvent","watchEvent","undefined","_isArray2","require","_isArray3","_interopRequireDefault","_constants","_query","obj","__esModule","default","firebase","dispatch","options","database","Error","type","path","populates","queryParams","queryId","isQuery","storeAs","logErrors","_","config","watchPath","id","getQueryIdFromPath","counter","getWatcherCount","unsetWatcher","setWatcher","ref","child","orderByKey","limitToFirst","once","then","snapshot","val","actionTypes","NO_VALUE","catch","err","ERROR","payload","Promise","reject","query","applyParamsToQuery","START","SET","data","ordered","orderedFromSnapshot","populateAndDispatch","UNAUTHORIZED_ERROR","on","resultPath","key","console","log","_ref","events","map","event","forEach","arguments","length","_options$dispatchActi","dispatchAction","dispatchRemoveAction","REMOVE"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.remove = exports.unWatchEvents = exports.watchEvents = exports.unWatchEvent = exports.watchEvent = undefined;\n\nvar _isArray2 = require('lodash/isArray');\n\nvar _isArray3 = _interopRequireDefault(_isArray2);\n\nvar _constants = require('../constants');\n\nvar _query = require('../utils/query');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar watchEvent = exports.watchEvent = function watchEvent(firebase, dispatch, options) {\n  if (!firebase.database || typeof firebase.database !== 'function') {\n    throw new Error('Firebase database is required to create watchers');\n  }\n  var type = options.type,\n      path = options.path,\n      populates = options.populates,\n      queryParams = options.queryParams,\n      queryId = options.queryId,\n      isQuery = options.isQuery,\n      storeAs = options.storeAs;\n  var logErrors = firebase._.config.logErrors;\n\n\n  var watchPath = !storeAs ? path : path + '@' + storeAs;\n  var id = queryId || (0, _query.getQueryIdFromPath)(path);\n  var counter = (0, _query.getWatcherCount)(firebase, type, watchPath, id);\n\n  if (counter > 0) {\n    if (id) {\n      (0, _query.unsetWatcher)(firebase, dispatch, type, path, id);\n    }\n  }\n\n  (0, _query.setWatcher)(firebase, dispatch, type, watchPath, id);\n\n  if (type === 'first_child') {\n    return firebase.database().ref().child(path).orderByKey().limitToFirst(1).once('value').then(function (snapshot) {\n      if (snapshot.val() === null) {\n        dispatch({\n          type: _constants.actionTypes.NO_VALUE,\n          path: storeAs || path\n        });\n      }\n      return snapshot;\n    }).catch(function (err) {\n      dispatch({\n        type: _constants.actionTypes.ERROR,\n        path: storeAs || path,\n        payload: err\n      });\n      return Promise.reject(err);\n    });\n  }\n\n  var query = firebase.database().ref().child(path);\n\n  if (isQuery) {\n    query = (0, _query.applyParamsToQuery)(queryParams, query);\n  }\n\n  dispatch({ type: _constants.actionTypes.START, path: storeAs || path });\n\n  if (type === 'once') {\n    return query.once('value').then(function (snapshot) {\n      if (snapshot.val() === null) {\n        return dispatch({\n          type: _constants.actionTypes.NO_VALUE,\n          path: storeAs || path\n        });\n      }\n\n      if (!populates) {\n        return dispatch({\n          type: _constants.actionTypes.SET,\n          path: storeAs || path,\n          data: snapshot.val(),\n          ordered: (0, _query.orderedFromSnapshot)(snapshot)\n        });\n      }\n\n      return (0, _query.populateAndDispatch)(firebase, dispatch, {\n        path: path,\n        storeAs: storeAs,\n        snapshot: snapshot,\n        data: snapshot.val(),\n        populates: populates\n      });\n    }).catch(function (err) {\n      dispatch({\n        type: _constants.actionTypes.UNAUTHORIZED_ERROR,\n        payload: err\n      });\n      return Promise.reject(err);\n    });\n  }\n\n  query.on(type, function (snapshot) {\n    var data = type === 'child_removed' ? undefined : snapshot.val();\n    var resultPath = storeAs || type === 'value' ? path : path + '/' + snapshot.key;\n\n    if (!populates) {\n      var ordered = type === 'child_added' ? [{ key: snapshot.key, value: snapshot.val() }] : (0, _query.orderedFromSnapshot)(snapshot);\n      return dispatch({\n        type: _constants.actionTypes.SET,\n        path: storeAs || resultPath,\n        data: data,\n        ordered: ordered\n      });\n    }\n\n    return (0, _query.populateAndDispatch)(firebase, dispatch, {\n      path: path,\n      storeAs: storeAs,\n      snapshot: snapshot,\n      data: snapshot.val(),\n      populates: populates\n    });\n  }, function (err) {\n    if (logErrors) {\n      console.log('RRF: Error retrieving data for path: ' + path + ', storeAs: ' + storeAs + '. Firebase:', err);\n    }\n    dispatch({\n      type: _constants.actionTypes.ERROR,\n      storeAs: storeAs,\n      path: path,\n      payload: err\n    });\n  });\n};\n\nvar unWatchEvent = exports.unWatchEvent = function unWatchEvent(firebase, dispatch, _ref) {\n  var type = _ref.type,\n      path = _ref.path,\n      storeAs = _ref.storeAs,\n      queryId = _ref.queryId;\n\n  var watchPath = !storeAs ? path : path + '@' + storeAs;\n  (0, _query.unsetWatcher)(firebase, dispatch, type, watchPath, queryId);\n};\n\nvar watchEvents = exports.watchEvents = function watchEvents(firebase, dispatch, events) {\n  if (!(0, _isArray3.default)(events)) {\n    throw new Error('Events config must be an Array');\n  }\n  return events.map(function (event) {\n    return watchEvent(firebase, dispatch, event);\n  });\n};\n\nvar unWatchEvents = exports.unWatchEvents = function unWatchEvents(firebase, dispatch, events) {\n  return events.forEach(function (event) {\n    return unWatchEvent(firebase, dispatch, event);\n  });\n};\n\nvar remove = exports.remove = function remove(firebase, dispatch, path) {\n  var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n  var _options$dispatchActi = options.dispatchAction,\n      dispatchAction = _options$dispatchActi === undefined ? true : _options$dispatchActi;\n  var dispatchRemoveAction = firebase._.config.dispatchRemoveAction;\n\n  return firebase.database().ref(path).remove().then(function () {\n    if (dispatchRemoveAction && dispatchAction) {\n      dispatch({ type: _constants.actionTypes.REMOVE, path: path });\n    }\n    return path;\n  }).catch(function (err) {\n    dispatch({ type: _constants.actionTypes.ERROR, payload: err });\n    return Promise.reject(err);\n  });\n};\n\nexports.default = { watchEvents: watchEvents, unWatchEvents: unWatchEvents, remove: remove };"]},"metadata":{},"sourceType":"script"}