{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createFirebaseInstance = undefined;\n\nvar _isObject2 = require('lodash/isObject');\n\nvar _isObject3 = _interopRequireDefault(_isObject2);\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _utils = require('./utils');\n\nvar _actions = require('./utils/actions');\n\nvar _actions2 = require('./actions');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar createFirebaseInstance = exports.createFirebaseInstance = function createFirebaseInstance(firebase, configs, dispatch) {\n  if (configs.enableLogging && firebase.database && typeof firebase.database.enableLogging === 'function') {\n    firebase.database.enableLogging(configs.enableLogging);\n  }\n\n  var defaultInternals = {\n    watchers: {},\n    listeners: {},\n    callbacks: {},\n    queries: {},\n    config: configs,\n    authUid: null\n  };\n  Object.defineProperty(firebase, '_', {\n    value: defaultInternals,\n    writable: true,\n    enumerable: true,\n    configurable: true\n  });\n\n  var withMeta = function withMeta(method, path, value, onComplete) {\n    if ((0, _isObject3.default)(value)) {\n      var prefix = method === 'update' ? 'updated' : 'created';\n\n      var dataWithMeta = _extends({}, value, _defineProperty({}, prefix + 'At', firebase.database.ServerValue.TIMESTAMP));\n\n      if (firebase.auth().currentUser) {\n        dataWithMeta[prefix + 'By'] = firebase.auth().currentUser.uid;\n      }\n\n      return firebase.database().ref(path)[method](dataWithMeta, onComplete);\n    }\n\n    return firebase.database().ref(path)[method](value, onComplete);\n  };\n\n  var set = function set(path, value, onComplete) {\n    return firebase.database().ref(path).set(value, onComplete);\n  };\n\n  var setWithMeta = function setWithMeta(path, value, onComplete) {\n    return withMeta('set', path, value, onComplete);\n  };\n\n  var push = function push(path, value, onComplete) {\n    return firebase.database().ref(path).push(value, onComplete);\n  };\n\n  var pushWithMeta = function pushWithMeta(path, value, onComplete) {\n    return withMeta('push', path, value, onComplete);\n  };\n\n  var update = function update(path, value, onComplete) {\n    return firebase.database().ref(path).update(value, onComplete);\n  };\n\n  var updateWithMeta = function updateWithMeta(path, value, onComplete) {\n    return withMeta('update', path, value, onComplete);\n  };\n\n  var remove = function remove(path, onComplete, options) {\n    return _actions2.queryActions.remove(firebase, dispatch, path, options).then(function () {\n      if (typeof onComplete === 'function') onComplete();\n      return path;\n    });\n  };\n\n  var uniqueSet = function uniqueSet(path, value, onComplete) {\n    return firebase.database().ref(path).transaction(function (d) {\n      return d === null ? value : undefined;\n    }).then(function (_ref) {\n      var committed = _ref.committed,\n          snapshot = _ref.snapshot;\n\n      if (!committed) {\n        var newError = new Error('Path already exists.');\n        if (onComplete) onComplete(newError);\n        return Promise.reject(newError);\n      }\n\n      if (onComplete) onComplete(snapshot);\n      return snapshot;\n    });\n  };\n\n  var uploadFile = function uploadFile(path, file, dbPath, options) {\n    return _actions2.storageActions.uploadFile(dispatch, firebase, {\n      path: path,\n      file: file,\n      dbPath: dbPath,\n      options: options\n    });\n  };\n\n  var uploadFiles = function uploadFiles(path, files, dbPath, options) {\n    return _actions2.storageActions.uploadFiles(dispatch, firebase, {\n      path: path,\n      files: files,\n      dbPath: dbPath,\n      options: options\n    });\n  };\n\n  var deleteFile = function deleteFile(path, dbPath) {\n    return _actions2.storageActions.deleteFile(dispatch, firebase, {\n      path: path,\n      dbPath: dbPath\n    });\n  };\n\n  var watchEvent = function watchEvent(type, path, storeAs) {\n    var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    return _actions2.queryActions.watchEvent(firebase, dispatch, _extends({\n      type: type,\n      path: path,\n      storeAs: storeAs\n    }, options));\n  };\n\n  var unWatchEvent = function unWatchEvent(type, path, queryId) {\n    var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    return _actions2.queryActions.unWatchEvent(firebase, dispatch, _extends({\n      type: type,\n      path: path,\n      queryId: queryId\n    }, options));\n  };\n\n  var promiseEvents = function promiseEvents(watchArray, options) {\n    var inputAsFunc = (0, _utils.createCallable)(watchArray);\n    var prevData = inputAsFunc(options, firebase);\n    var queryConfigs = (0, _utils.getEventsFromInput)(prevData);\n    return Promise.all(queryConfigs.map(function (queryConfig) {\n      return _actions2.queryActions.watchEvent(firebase, dispatch, queryConfig);\n    }));\n  };\n\n  var login = function login(credentials) {\n    return _actions2.authActions.login(dispatch, firebase, credentials);\n  };\n\n  var logout = function logout() {\n    return _actions2.authActions.logout(dispatch, firebase);\n  };\n\n  var createUser = function createUser(credentials, profile) {\n    return _actions2.authActions.createUser(dispatch, firebase, credentials, profile);\n  };\n\n  var resetPassword = function resetPassword(credentials) {\n    return _actions2.authActions.resetPassword(dispatch, firebase, credentials);\n  };\n\n  var confirmPasswordReset = function confirmPasswordReset(code, password) {\n    return _actions2.authActions.confirmPasswordReset(dispatch, firebase, code, password);\n  };\n\n  var verifyPasswordResetCode = function verifyPasswordResetCode(code) {\n    return _actions2.authActions.verifyPasswordResetCode(dispatch, firebase, code);\n  };\n\n  var updateProfile = function updateProfile(profileUpdate, options) {\n    return _actions2.authActions.updateProfile(dispatch, firebase, profileUpdate, options);\n  };\n\n  var updateAuth = function updateAuth(authUpdate, updateInProfile) {\n    return _actions2.authActions.updateAuth(dispatch, firebase, authUpdate, updateInProfile);\n  };\n\n  var updateEmail = function updateEmail(newEmail, updateInProfile) {\n    return _actions2.authActions.updateEmail(dispatch, firebase, newEmail, updateInProfile);\n  };\n\n  var reloadAuth = function reloadAuth() {\n    return _actions2.authActions.reloadAuth(dispatch, firebase);\n  };\n\n  var linkWithCredential = function linkWithCredential(credential) {\n    return _actions2.authActions.linkWithCredential(dispatch, firebase, credential);\n  };\n\n  var actionCreators = (0, _actions.mapWithFirebaseAndDispatch)(firebase, dispatch, {\n    signInWithPhoneNumber: _actions2.authActions.signInWithPhoneNumber\n  });\n\n  var helpers = _extends({\n    ref: function ref(path) {\n      return firebase.database().ref(path);\n    },\n    set: set,\n    setWithMeta: setWithMeta,\n    uniqueSet: uniqueSet,\n    push: push,\n    pushWithMeta: pushWithMeta,\n    remove: remove,\n    update: update,\n    updateWithMeta: updateWithMeta,\n    login: login,\n    logout: logout,\n    updateAuth: updateAuth,\n    updateEmail: updateEmail,\n    updateProfile: updateProfile,\n    uploadFile: uploadFile,\n    uploadFiles: uploadFiles,\n    deleteFile: deleteFile,\n    createUser: createUser,\n    resetPassword: resetPassword,\n    confirmPasswordReset: confirmPasswordReset,\n    verifyPasswordResetCode: verifyPasswordResetCode,\n    watchEvent: watchEvent,\n    unWatchEvent: unWatchEvent,\n    reloadAuth: reloadAuth,\n    linkWithCredential: linkWithCredential,\n    promiseEvents: promiseEvents\n  }, actionCreators);\n\n  return _extends(firebase, helpers, {\n    helpers: helpers\n  });\n};","map":{"version":3,"sources":["/Users/jatinkumar/Desktop/react-material-dashboard-master/node_modules/react-redux-firebase/es/createFirebaseInstance.js"],"names":["Object","defineProperty","exports","value","createFirebaseInstance","undefined","_isObject2","require","_isObject3","_interopRequireDefault","_extends","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_utils","_actions","_actions2","obj","__esModule","default","_defineProperty","enumerable","configurable","writable","firebase","configs","dispatch","enableLogging","database","defaultInternals","watchers","listeners","callbacks","queries","config","authUid","withMeta","method","path","onComplete","prefix","dataWithMeta","ServerValue","TIMESTAMP","auth","currentUser","uid","ref","set","setWithMeta","push","pushWithMeta","update","updateWithMeta","remove","options","queryActions","then","uniqueSet","transaction","d","_ref","committed","snapshot","newError","Error","Promise","reject","uploadFile","file","dbPath","storageActions","uploadFiles","files","deleteFile","watchEvent","type","storeAs","unWatchEvent","queryId","promiseEvents","watchArray","inputAsFunc","createCallable","prevData","queryConfigs","getEventsFromInput","all","map","queryConfig","login","credentials","authActions","logout","createUser","profile","resetPassword","confirmPasswordReset","code","password","verifyPasswordResetCode","updateProfile","profileUpdate","updateAuth","authUpdate","updateInProfile","updateEmail","newEmail","reloadAuth","linkWithCredential","credential","actionCreators","mapWithFirebaseAndDispatch","signInWithPhoneNumber","helpers"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createFirebaseInstance = undefined;\n\nvar _isObject2 = require('lodash/isObject');\n\nvar _isObject3 = _interopRequireDefault(_isObject2);\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _utils = require('./utils');\n\nvar _actions = require('./utils/actions');\n\nvar _actions2 = require('./actions');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar createFirebaseInstance = exports.createFirebaseInstance = function createFirebaseInstance(firebase, configs, dispatch) {\n  if (configs.enableLogging && firebase.database && typeof firebase.database.enableLogging === 'function') {\n    firebase.database.enableLogging(configs.enableLogging);\n  }\n\n  var defaultInternals = {\n    watchers: {},\n    listeners: {},\n    callbacks: {},\n    queries: {},\n    config: configs,\n    authUid: null\n  };\n\n  Object.defineProperty(firebase, '_', {\n    value: defaultInternals,\n    writable: true,\n    enumerable: true,\n    configurable: true\n  });\n\n  var withMeta = function withMeta(method, path, value, onComplete) {\n    if ((0, _isObject3.default)(value)) {\n      var prefix = method === 'update' ? 'updated' : 'created';\n      var dataWithMeta = _extends({}, value, _defineProperty({}, prefix + 'At', firebase.database.ServerValue.TIMESTAMP));\n      if (firebase.auth().currentUser) {\n        dataWithMeta[prefix + 'By'] = firebase.auth().currentUser.uid;\n      }\n      return firebase.database().ref(path)[method](dataWithMeta, onComplete);\n    }\n    return firebase.database().ref(path)[method](value, onComplete);\n  };\n\n  var set = function set(path, value, onComplete) {\n    return firebase.database().ref(path).set(value, onComplete);\n  };\n\n  var setWithMeta = function setWithMeta(path, value, onComplete) {\n    return withMeta('set', path, value, onComplete);\n  };\n\n  var push = function push(path, value, onComplete) {\n    return firebase.database().ref(path).push(value, onComplete);\n  };\n\n  var pushWithMeta = function pushWithMeta(path, value, onComplete) {\n    return withMeta('push', path, value, onComplete);\n  };\n\n  var update = function update(path, value, onComplete) {\n    return firebase.database().ref(path).update(value, onComplete);\n  };\n\n  var updateWithMeta = function updateWithMeta(path, value, onComplete) {\n    return withMeta('update', path, value, onComplete);\n  };\n\n  var remove = function remove(path, onComplete, options) {\n    return _actions2.queryActions.remove(firebase, dispatch, path, options).then(function () {\n      if (typeof onComplete === 'function') onComplete();\n      return path;\n    });\n  };\n\n  var uniqueSet = function uniqueSet(path, value, onComplete) {\n    return firebase.database().ref(path).transaction(function (d) {\n      return d === null ? value : undefined;\n    }).then(function (_ref) {\n      var committed = _ref.committed,\n          snapshot = _ref.snapshot;\n\n      if (!committed) {\n        var newError = new Error('Path already exists.');\n        if (onComplete) onComplete(newError);\n        return Promise.reject(newError);\n      }\n      if (onComplete) onComplete(snapshot);\n      return snapshot;\n    });\n  };\n\n  var uploadFile = function uploadFile(path, file, dbPath, options) {\n    return _actions2.storageActions.uploadFile(dispatch, firebase, {\n      path: path,\n      file: file,\n      dbPath: dbPath,\n      options: options\n    });\n  };\n\n  var uploadFiles = function uploadFiles(path, files, dbPath, options) {\n    return _actions2.storageActions.uploadFiles(dispatch, firebase, {\n      path: path,\n      files: files,\n      dbPath: dbPath,\n      options: options\n    });\n  };\n\n  var deleteFile = function deleteFile(path, dbPath) {\n    return _actions2.storageActions.deleteFile(dispatch, firebase, { path: path, dbPath: dbPath });\n  };\n\n  var watchEvent = function watchEvent(type, path, storeAs) {\n    var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    return _actions2.queryActions.watchEvent(firebase, dispatch, _extends({\n      type: type,\n      path: path,\n      storeAs: storeAs\n    }, options));\n  };\n\n  var unWatchEvent = function unWatchEvent(type, path, queryId) {\n    var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    return _actions2.queryActions.unWatchEvent(firebase, dispatch, _extends({\n      type: type,\n      path: path,\n      queryId: queryId\n    }, options));\n  };\n\n  var promiseEvents = function promiseEvents(watchArray, options) {\n    var inputAsFunc = (0, _utils.createCallable)(watchArray);\n    var prevData = inputAsFunc(options, firebase);\n    var queryConfigs = (0, _utils.getEventsFromInput)(prevData);\n\n    return Promise.all(queryConfigs.map(function (queryConfig) {\n      return _actions2.queryActions.watchEvent(firebase, dispatch, queryConfig);\n    }));\n  };\n\n  var login = function login(credentials) {\n    return _actions2.authActions.login(dispatch, firebase, credentials);\n  };\n\n  var logout = function logout() {\n    return _actions2.authActions.logout(dispatch, firebase);\n  };\n\n  var createUser = function createUser(credentials, profile) {\n    return _actions2.authActions.createUser(dispatch, firebase, credentials, profile);\n  };\n\n  var resetPassword = function resetPassword(credentials) {\n    return _actions2.authActions.resetPassword(dispatch, firebase, credentials);\n  };\n\n  var confirmPasswordReset = function confirmPasswordReset(code, password) {\n    return _actions2.authActions.confirmPasswordReset(dispatch, firebase, code, password);\n  };\n\n  var verifyPasswordResetCode = function verifyPasswordResetCode(code) {\n    return _actions2.authActions.verifyPasswordResetCode(dispatch, firebase, code);\n  };\n\n  var updateProfile = function updateProfile(profileUpdate, options) {\n    return _actions2.authActions.updateProfile(dispatch, firebase, profileUpdate, options);\n  };\n\n  var updateAuth = function updateAuth(authUpdate, updateInProfile) {\n    return _actions2.authActions.updateAuth(dispatch, firebase, authUpdate, updateInProfile);\n  };\n\n  var updateEmail = function updateEmail(newEmail, updateInProfile) {\n    return _actions2.authActions.updateEmail(dispatch, firebase, newEmail, updateInProfile);\n  };\n\n  var reloadAuth = function reloadAuth() {\n    return _actions2.authActions.reloadAuth(dispatch, firebase);\n  };\n\n  var linkWithCredential = function linkWithCredential(credential) {\n    return _actions2.authActions.linkWithCredential(dispatch, firebase, credential);\n  };\n\n  var actionCreators = (0, _actions.mapWithFirebaseAndDispatch)(firebase, dispatch, {\n    signInWithPhoneNumber: _actions2.authActions.signInWithPhoneNumber\n  });\n\n  var helpers = _extends({\n    ref: function ref(path) {\n      return firebase.database().ref(path);\n    },\n    set: set,\n    setWithMeta: setWithMeta,\n    uniqueSet: uniqueSet,\n    push: push,\n    pushWithMeta: pushWithMeta,\n    remove: remove,\n    update: update,\n    updateWithMeta: updateWithMeta,\n    login: login,\n    logout: logout,\n    updateAuth: updateAuth,\n    updateEmail: updateEmail,\n    updateProfile: updateProfile,\n    uploadFile: uploadFile,\n    uploadFiles: uploadFiles,\n    deleteFile: deleteFile,\n    createUser: createUser,\n    resetPassword: resetPassword,\n    confirmPasswordReset: confirmPasswordReset,\n    verifyPasswordResetCode: verifyPasswordResetCode,\n    watchEvent: watchEvent,\n    unWatchEvent: unWatchEvent,\n    reloadAuth: reloadAuth,\n    linkWithCredential: linkWithCredential,\n    promiseEvents: promiseEvents\n  }, actionCreators);\n\n  return _extends(firebase, helpers, { helpers: helpers });\n};"]},"metadata":{},"sourceType":"script"}