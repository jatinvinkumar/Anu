{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.populate = exports.fixPath = exports.isEmpty = exports.isLoaded = exports.getVal = undefined;\n\nvar _isFunction2 = require('lodash/isFunction');\n\nvar _isFunction3 = _interopRequireDefault(_isFunction2);\n\nvar _isArray2 = require('lodash/isArray');\n\nvar _isArray3 = _interopRequireDefault(_isArray2);\n\nvar _some2 = require('lodash/some');\n\nvar _some3 = _interopRequireDefault(_some2);\n\nvar _compact2 = require('lodash/compact');\n\nvar _compact3 = _interopRequireDefault(_compact2);\n\nvar _isString2 = require('lodash/isString');\n\nvar _isString3 = _interopRequireDefault(_isString2);\n\nvar _defaultsDeep2 = require('lodash/defaultsDeep');\n\nvar _defaultsDeep3 = _interopRequireDefault(_defaultsDeep2);\n\nvar _reduce2 = require('lodash/reduce');\n\nvar _reduce3 = _interopRequireDefault(_reduce2);\n\nvar _every2 = require('lodash/every');\n\nvar _every3 = _interopRequireDefault(_every2);\n\nvar _mapValues2 = require('lodash/mapValues');\n\nvar _mapValues3 = _interopRequireDefault(_mapValues2);\n\nvar _map2 = require('lodash/map');\n\nvar _map3 = _interopRequireDefault(_map2);\n\nvar _last2 = require('lodash/last');\n\nvar _last3 = _interopRequireDefault(_last2);\n\nvar _has2 = require('lodash/has');\n\nvar _has3 = _interopRequireDefault(_has2);\n\nvar _get2 = require('lodash/get');\n\nvar _get3 = _interopRequireDefault(_get2);\n\nvar _set2 = require('lodash/set');\n\nvar _set3 = _interopRequireDefault(_set2);\n\nvar _size2 = require('lodash/size');\n\nvar _size3 = _interopRequireDefault(_size2);\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _constants = require('./constants');\n\nvar _populate = require('./utils/populate');\n\nvar _reducers = require('./utils/reducers');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _toConsumableArray(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  } else {\n    return Array.from(arr);\n  }\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar getVal = exports.getVal = function getVal(firebase, path, notSetValue) {\n  if (!firebase) {\n    return notSetValue;\n  }\n\n  var dotPath = (0, _reducers.getDotStrPath)(path);\n  var valueAtPath = (0, _get3.default)(firebase, dotPath, notSetValue);\n  return valueAtPath;\n};\n\nvar isLoaded = exports.isLoaded = function isLoaded() {\n  for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  return !args || !args.length ? true : (0, _every3.default)(args, function (arg) {\n    return arg !== undefined && (0, _get3.default)(arg, 'isLoaded') !== false;\n  });\n};\n\nvar isEmpty = exports.isEmpty = function isEmpty() {\n  for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n    args[_key2] = arguments[_key2];\n  }\n\n  return (0, _some3.default)(args, function (arg) {\n    return !(arg && (0, _size3.default)(arg)) || arg.isEmpty === true;\n  });\n};\n\nvar fixPath = exports.fixPath = function fixPath(path) {\n  return (path.substring(0, 1) === '/' ? '' : '/') + path;\n};\n\nvar buildChildList = function buildChildList(state, list, p) {\n  return (0, _mapValues3.default)(list, function (val, key) {\n    var getKey = val;\n\n    if (val === true || p.populateByKey) {\n      getKey = key;\n    }\n\n    var dotRoot = (0, _compact3.default)(p.root.split('/')).join('.');\n    var pathArr = [dotRoot, getKey];\n\n    if (p.childParam) {\n      pathArr.push(p.childParam);\n    }\n\n    var pathString = pathArr.join('.');\n\n    if ((0, _get3.default)(state.data, pathString)) {\n      return p.keyProp ? _extends(_defineProperty({}, p.keyProp, getKey), (0, _get3.default)(state.data, pathString)) : (0, _get3.default)(state.data, pathString);\n    }\n\n    return val === true || p.populateByKey ? val : getKey;\n  });\n};\n\nvar populateChild = function populateChild(state, child, p) {\n  var childVal = (0, _get3.default)(child, p.child);\n\n  if (!child || !childVal) {\n    return null;\n  }\n\n  if ((0, _isString3.default)(childVal)) {\n    var dotRoot = (0, _compact3.default)(p.root.split('/')).join('.');\n    var pathArr = [dotRoot, childVal];\n\n    if (p.childParam) {\n      pathArr.push(p.childParam);\n    }\n\n    var pathString = pathArr.join('.');\n    var populateVal = (0, _get3.default)(state.data, pathString);\n\n    if (populateVal) {\n      return (0, _set3.default)({}, p.childAlias || p.child, p.keyProp ? _extends(_defineProperty({}, p.keyProp, childVal), populateVal) : populateVal);\n    }\n\n    return child;\n  }\n\n  return (0, _set3.default)({}, p.childAlias || p.child, buildChildList(state, childVal, p));\n};\n\nvar populate = exports.populate = function populate(state, path, populates, notSetValue) {\n  var splitPath = (0, _compact3.default)(path.split('/'));\n  var pathArr = _constants.topLevelPaths.indexOf(splitPath[0]) === -1 ? ['data'].concat(_toConsumableArray(splitPath)) : splitPath;\n  var dotPath = pathArr.join('.');\n  var data = (0, _get3.default)(state, dotPath, notSetValue);\n\n  if (!state || data === notSetValue) {\n    return notSetValue;\n  }\n\n  if (data === null) {\n    return null;\n  }\n\n  var populatesForData = (0, _populate.getPopulateObjs)((0, _isFunction3.default)(populates) ? populates((0, _last3.default)(pathArr), data) : populates);\n\n  if ((0, _isArray3.default)(data)) {\n    var someArrayItemHasKey = function someArrayItemHasKey(array) {\n      return function (key) {\n        return (0, _some3.default)(array, function (item) {\n          return (0, _has3.default)(item, key);\n        });\n      };\n    };\n\n    var _dataHasPopulateChilds = (0, _some3.default)(populatesForData, function (populate) {\n      return someArrayItemHasKey(data)(['value', populate.child]);\n    });\n\n    if (_dataHasPopulateChilds) {\n      return data.map(function (_ref) {\n        var key = _ref.key,\n            dataValue = _ref.value;\n        var populatedValue = populatesForData.map(function (p) {\n          return populateChild(state, dataValue, p);\n        }).reduce(function (acc, v) {\n          return (0, _defaultsDeep3.default)(v, acc);\n        }, dataValue);\n        return {\n          key: key,\n          value: populatedValue\n        };\n      });\n    }\n\n    return data;\n  }\n\n  var dataHasPopulateChilds = (0, _some3.default)(populatesForData, function (p) {\n    return (0, _has3.default)(data, p.child);\n  });\n\n  if (dataHasPopulateChilds) {\n    return populatesForData.map(function (p) {\n      return populateChild(state, data, p);\n    }).reduce(function (acc, v) {\n      return (0, _defaultsDeep3.default)(v, acc);\n    }, data);\n  }\n\n  if (pathArr.indexOf('profile') !== -1) {\n    return data;\n  }\n\n  return (0, _mapValues3.default)(data, function (child, childKey) {\n    var key = pathArr[0] === 'ordered' ? child.key : childKey;\n    var populatesForDataItem = (0, _populate.getPopulateObjs)((0, _isFunction3.default)(populates) ? populates(key, child) : populates);\n    var dataHasPopulateChilds = (0, _some3.default)(populatesForDataItem, function (p) {\n      return (0, _has3.default)(child, p.child);\n    });\n\n    if (!dataHasPopulateChilds) {\n      return child;\n    }\n\n    return (0, _reduce3.default)((0, _map3.default)(populatesForDataItem, function (p) {\n      return populateChild(state, child, p);\n    }), function (obj, v) {\n      return (0, _defaultsDeep3.default)(v, obj);\n    }, child);\n  });\n};","map":{"version":3,"sources":["/Users/pritivirajkumar/Documents/GitHub/Anu/node_modules/react-redux-firebase/es/helpers.js"],"names":["Object","defineProperty","exports","value","populate","fixPath","isEmpty","isLoaded","getVal","undefined","_isFunction2","require","_isFunction3","_interopRequireDefault","_isArray2","_isArray3","_some2","_some3","_compact2","_compact3","_isString2","_isString3","_defaultsDeep2","_defaultsDeep3","_reduce2","_reduce3","_every2","_every3","_mapValues2","_mapValues3","_map2","_map3","_last2","_last3","_has2","_has3","_get2","_get3","_set2","_set3","_size2","_size3","_extends","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_constants","_populate","_reducers","obj","__esModule","default","_toConsumableArray","arr","Array","isArray","arr2","from","_defineProperty","enumerable","configurable","writable","firebase","path","notSetValue","dotPath","getDotStrPath","valueAtPath","_len","args","_key","arg","_len2","_key2","substring","buildChildList","state","list","p","val","getKey","populateByKey","dotRoot","root","split","join","pathArr","childParam","push","pathString","data","keyProp","populateChild","child","childVal","populateVal","childAlias","populates","splitPath","topLevelPaths","indexOf","concat","populatesForData","getPopulateObjs","someArrayItemHasKey","array","item","_dataHasPopulateChilds","map","_ref","dataValue","populatedValue","reduce","acc","v","dataHasPopulateChilds","childKey","populatesForDataItem"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.populate = exports.fixPath = exports.isEmpty = exports.isLoaded = exports.getVal = undefined;\n\nvar _isFunction2 = require('lodash/isFunction');\n\nvar _isFunction3 = _interopRequireDefault(_isFunction2);\n\nvar _isArray2 = require('lodash/isArray');\n\nvar _isArray3 = _interopRequireDefault(_isArray2);\n\nvar _some2 = require('lodash/some');\n\nvar _some3 = _interopRequireDefault(_some2);\n\nvar _compact2 = require('lodash/compact');\n\nvar _compact3 = _interopRequireDefault(_compact2);\n\nvar _isString2 = require('lodash/isString');\n\nvar _isString3 = _interopRequireDefault(_isString2);\n\nvar _defaultsDeep2 = require('lodash/defaultsDeep');\n\nvar _defaultsDeep3 = _interopRequireDefault(_defaultsDeep2);\n\nvar _reduce2 = require('lodash/reduce');\n\nvar _reduce3 = _interopRequireDefault(_reduce2);\n\nvar _every2 = require('lodash/every');\n\nvar _every3 = _interopRequireDefault(_every2);\n\nvar _mapValues2 = require('lodash/mapValues');\n\nvar _mapValues3 = _interopRequireDefault(_mapValues2);\n\nvar _map2 = require('lodash/map');\n\nvar _map3 = _interopRequireDefault(_map2);\n\nvar _last2 = require('lodash/last');\n\nvar _last3 = _interopRequireDefault(_last2);\n\nvar _has2 = require('lodash/has');\n\nvar _has3 = _interopRequireDefault(_has2);\n\nvar _get2 = require('lodash/get');\n\nvar _get3 = _interopRequireDefault(_get2);\n\nvar _set2 = require('lodash/set');\n\nvar _set3 = _interopRequireDefault(_set2);\n\nvar _size2 = require('lodash/size');\n\nvar _size3 = _interopRequireDefault(_size2);\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _constants = require('./constants');\n\nvar _populate = require('./utils/populate');\n\nvar _reducers = require('./utils/reducers');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar getVal = exports.getVal = function getVal(firebase, path, notSetValue) {\n  if (!firebase) {\n    return notSetValue;\n  }\n\n  var dotPath = (0, _reducers.getDotStrPath)(path);\n  var valueAtPath = (0, _get3.default)(firebase, dotPath, notSetValue);\n\n  return valueAtPath;\n};\n\nvar isLoaded = exports.isLoaded = function isLoaded() {\n  for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  return !args || !args.length ? true : (0, _every3.default)(args, function (arg) {\n    return arg !== undefined && (0, _get3.default)(arg, 'isLoaded') !== false;\n  });\n};\n\nvar isEmpty = exports.isEmpty = function isEmpty() {\n  for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n    args[_key2] = arguments[_key2];\n  }\n\n  return (0, _some3.default)(args, function (arg) {\n    return !(arg && (0, _size3.default)(arg)) || arg.isEmpty === true;\n  });\n};\n\nvar fixPath = exports.fixPath = function fixPath(path) {\n  return (path.substring(0, 1) === '/' ? '' : '/') + path;\n};\n\nvar buildChildList = function buildChildList(state, list, p) {\n  return (0, _mapValues3.default)(list, function (val, key) {\n    var getKey = val;\n\n    if (val === true || p.populateByKey) {\n      getKey = key;\n    }\n\n    var dotRoot = (0, _compact3.default)(p.root.split('/')).join('.');\n    var pathArr = [dotRoot, getKey];\n\n    if (p.childParam) {\n      pathArr.push(p.childParam);\n    }\n\n    var pathString = pathArr.join('.');\n\n    if ((0, _get3.default)(state.data, pathString)) {\n      return p.keyProp ? _extends(_defineProperty({}, p.keyProp, getKey), (0, _get3.default)(state.data, pathString)) : (0, _get3.default)(state.data, pathString);\n    }\n\n    return val === true || p.populateByKey ? val : getKey;\n  });\n};\n\nvar populateChild = function populateChild(state, child, p) {\n  var childVal = (0, _get3.default)(child, p.child);\n  if (!child || !childVal) {\n    return null;\n  }\n\n  if ((0, _isString3.default)(childVal)) {\n    var dotRoot = (0, _compact3.default)(p.root.split('/')).join('.');\n    var pathArr = [dotRoot, childVal];\n\n    if (p.childParam) {\n      pathArr.push(p.childParam);\n    }\n\n    var pathString = pathArr.join('.');\n\n    var populateVal = (0, _get3.default)(state.data, pathString);\n    if (populateVal) {\n      return (0, _set3.default)({}, p.childAlias || p.child, p.keyProp ? _extends(_defineProperty({}, p.keyProp, childVal), populateVal) : populateVal);\n    }\n\n    return child;\n  }\n\n  return (0, _set3.default)({}, p.childAlias || p.child, buildChildList(state, childVal, p));\n};\n\nvar populate = exports.populate = function populate(state, path, populates, notSetValue) {\n  var splitPath = (0, _compact3.default)(path.split('/'));\n\n  var pathArr = _constants.topLevelPaths.indexOf(splitPath[0]) === -1 ? ['data'].concat(_toConsumableArray(splitPath)) : splitPath;\n  var dotPath = pathArr.join('.');\n\n  var data = (0, _get3.default)(state, dotPath, notSetValue);\n\n  if (!state || data === notSetValue) {\n    return notSetValue;\n  }\n\n  if (data === null) {\n    return null;\n  }\n\n  var populatesForData = (0, _populate.getPopulateObjs)((0, _isFunction3.default)(populates) ? populates((0, _last3.default)(pathArr), data) : populates);\n\n  if ((0, _isArray3.default)(data)) {\n    var someArrayItemHasKey = function someArrayItemHasKey(array) {\n      return function (key) {\n        return (0, _some3.default)(array, function (item) {\n          return (0, _has3.default)(item, key);\n        });\n      };\n    };\n\n    var _dataHasPopulateChilds = (0, _some3.default)(populatesForData, function (populate) {\n      return someArrayItemHasKey(data)(['value', populate.child]);\n    });\n\n    if (_dataHasPopulateChilds) {\n      return data.map(function (_ref) {\n        var key = _ref.key,\n            dataValue = _ref.value;\n\n        var populatedValue = populatesForData.map(function (p) {\n          return populateChild(state, dataValue, p);\n        }).reduce(function (acc, v) {\n          return (0, _defaultsDeep3.default)(v, acc);\n        }, dataValue);\n\n        return {\n          key: key,\n          value: populatedValue\n        };\n      });\n    }\n\n    return data;\n  }\n\n  var dataHasPopulateChilds = (0, _some3.default)(populatesForData, function (p) {\n    return (0, _has3.default)(data, p.child);\n  });\n\n  if (dataHasPopulateChilds) {\n    return populatesForData.map(function (p) {\n      return populateChild(state, data, p);\n    }).reduce(function (acc, v) {\n      return (0, _defaultsDeep3.default)(v, acc);\n    }, data);\n  }\n\n  if (pathArr.indexOf('profile') !== -1) {\n    return data;\n  }\n\n  return (0, _mapValues3.default)(data, function (child, childKey) {\n    var key = pathArr[0] === 'ordered' ? child.key : childKey;\n\n    var populatesForDataItem = (0, _populate.getPopulateObjs)((0, _isFunction3.default)(populates) ? populates(key, child) : populates);\n\n    var dataHasPopulateChilds = (0, _some3.default)(populatesForDataItem, function (p) {\n      return (0, _has3.default)(child, p.child);\n    });\n\n    if (!dataHasPopulateChilds) {\n      return child;\n    }\n\n    return (0, _reduce3.default)((0, _map3.default)(populatesForDataItem, function (p) {\n      return populateChild(state, child, p);\n    }), function (obj, v) {\n      return (0, _defaultsDeep3.default)(v, obj);\n    }, child);\n  });\n};"]},"metadata":{},"sourceType":"script"}